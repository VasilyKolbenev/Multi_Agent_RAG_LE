<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>üèóÔ∏è MultiAgent-RAG Pro - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
  <style>
    .mermaid { 
      display: flex; 
      justify-content: center; 
      margin: 20px 0; 
    }
    .diagram-container {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      margin: 20px 0;
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <div class="max-w-7xl mx-auto p-6">
    
    <header class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-2">üèóÔ∏è MultiAgent-RAG Pro</h1>
      <h2 class="text-xl text-slate-600 mb-4">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã —Å–∏—Å—Ç–µ–º—ã</h2>
      <div class="text-sm text-emerald-600 font-medium">
        ‚úÖ v4.5 - SIMPLIFIED & OPTIMIZED | üïê –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2024-12-20
      </div>
    </header>

    <!-- –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">üåü –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã</h3>
      <div class="mermaid">
        graph TB
          subgraph "üåê Frontend"
            UI["`üì± **Web Interface**
            HTML + TailwindCSS + JavaScript`"]
            LX["`üîç **LangExtract UI**
            Entity extraction interface`"]
          end
          
          subgraph "üöÄ Backend API"
            MAIN["`‚ö° **FastAPI Server**
            main.py - REST endpoints`"]
            CORS["`üîó **CORS Handler**
            Cross-origin requests`"]
          end
          
          subgraph "üß† Agentic RAG Core"
            AGENTS["`ü§ñ **Agent System**
            Router ‚Üí Retrieval ‚Üí Evaluation ‚Üí Synthesis`"]
            LLM["`üéØ **LLM Service**
            OpenAI GPT-4o-mini integration`"]
          end
          
          subgraph "üìä Data Layer"
            STORAGE["`üíæ **Vector Storage**
            FAISS + BM25 hybrid search`"]
            GRAPH["`üï∏Ô∏è **Graph Index**
            Entity relationships`"]
            LANGX_SERVICE["`üè∑Ô∏è **LangExtract**
            Entity extraction service`"]
          end
          
          subgraph "‚òÅÔ∏è Deployment"
            RAILWAY["`üöÇ **Railway**
            Backend hosting`"]
            GITHUB["`üìÑ **GitHub Pages**
            Frontend hosting`"]
          end
          
          UI --> MAIN
          LX --> MAIN
          MAIN --> AGENTS
          AGENTS --> LLM
          AGENTS --> STORAGE
          AGENTS --> GRAPH
          MAIN --> LANGX_SERVICE
          MAIN --> RAILWAY
          UI --> GITHUB
          
          style UI fill:#e1f5fe
          style AGENTS fill:#f3e5f5
          style LLM fill:#fff3e0
          style STORAGE fill:#e8f5e8
          style RAILWAY fill:#ffe0b2
      </div>
    </div>

    <!-- Agentic RAG Flow -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">ü§ñ Agentic RAG - –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞</h3>
      <div class="mermaid">
        sequenceDiagram
          participant User as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
          participant UI as üì± Frontend
          participant API as ‚ö° FastAPI
          participant Router as üéØ Router Agent
          participant Retriever as üîç Retrieval Agent
          participant Evaluator as ‚öñÔ∏è Evaluation Agent
          participant Rewriter as ‚úèÔ∏è Query Rewriter
          participant Synthesizer as üß† Synthesis Agent
          participant LLM as ü§ñ GPT-4o-mini
          participant Storage as üíæ Vector DB
          
          User->>UI: üí¨ –ó–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å
          UI->>API: üì° POST /agentic_search
          API->>Router: üöÄ –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
          
          Router->>LLM: üéØ –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞
          LLM-->>Router: üìä –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∏—Å–∫–∞
          
          Router->>Retriever: üîç –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
          Retriever->>Storage: üíæ Hybrid search (BM25+Vector)
          Storage-->>Retriever: üìÑ –ö–∞–Ω–¥–∏–¥–∞—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
          Retriever-->>Router: üìã –ù–∞–π–¥–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
          
          Router->>Evaluator: ‚öñÔ∏è –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
          Evaluator->>LLM: ü§î –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
          LLM-->>Evaluator: üìà –û—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
          
          alt üìâ –ù–∏–∑–∫–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
            Evaluator->>Rewriter: ‚úèÔ∏è –ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å
            Rewriter->>LLM: üîÑ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
            LLM-->>Rewriter: üí° –ù–æ–≤—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏
            Rewriter->>Retriever: üîç –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
          end
          
          Evaluator-->>Router: ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
          Router->>Synthesizer: üß† –°–∏–Ω—Ç–µ–∑ –æ—Ç–≤–µ—Ç–∞
          Synthesizer->>LLM: üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
          LLM-->>Synthesizer: üí¨ –ì–æ—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
          
          Synthesizer-->>API: üéâ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç–≤–µ—Ç
          API-->>UI: üì° Streaming response
          UI-->>User: ‚ú® –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      </div>
    </div>

    <!-- Data Processing Pipeline -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">üìä –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö</h3>
      <div class="mermaid">
        flowchart TD
          subgraph "üìÅ Input Sources"
            FILES["`üìÑ **Files**
            TXT, PDF, DOC, JSON, CSV, HTML`"]
            TEXT["`üìù **Raw Text**
            Manual input`"]
          end
          
          subgraph "üîß Processing"
            EXTRACT["`üîç **Text Extraction**
            Format-specific parsers`"]
            CHUNK["`‚úÇÔ∏è **Text Chunking**
            Smart segmentation`"]
            ENTITIES["`üè∑Ô∏è **Entity Extraction**
            LangExtract integration`"]
          end
          
          subgraph "üóÉÔ∏è Indexing"
            VECTOR["`üßÆ **Vector Embedding**
            Semantic representation`"]
            BM25["`üî§ **BM25 Index**
            Keyword search`"]
            GRAPH_BUILD["`üï∏Ô∏è **Graph Building**
            Entity relationships`"]
          end
          
          subgraph "üíæ Storage"
            FAISS["`‚ö° **FAISS Index**
            Vector similarity search`"]
            BM25_IDX["`üìö **BM25 Storage**
            Sparse retrieval`"]
            GRAPH_DB["`üåê **Graph Index**
            Entity connections`"]
          end
          
          FILES --> EXTRACT
          TEXT --> EXTRACT
          EXTRACT --> CHUNK
          CHUNK --> ENTITIES
          CHUNK --> VECTOR
          CHUNK --> BM25
          ENTITIES --> GRAPH_BUILD
          
          VECTOR --> FAISS
          BM25 --> BM25_IDX
          GRAPH_BUILD --> GRAPH_DB
          
          style FILES fill:#e3f2fd
          style EXTRACT fill:#fff3e0
          style VECTOR fill:#f1f8e9
          style FAISS fill:#fce4ec
      </div>
    </div>

    <!-- Technology Stack -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫</h3>
      <div class="mermaid">
        mindmap
          root)üöÄ MultiAgent-RAG Pro(
            (üåê Frontend)
              HTML5
              TailwindCSS
              Vanilla JavaScript
              PDF.js
            (‚ö° Backend)
              Python 3.11+
              FastAPI
              Uvicorn
              Pydantic
            (ü§ñ AI/ML)
              OpenAI GPT-4o-mini
              FAISS Vector DB
              BM25 Search
              LangExtract
            (üìä Data Processing)
              JSON handling
              PDF parsing
              CSV processing
              HTML extraction
            (‚òÅÔ∏è Deployment)
              Railway Backend
              GitHub Pages Frontend
              Docker support
              Environment variables
      </div>
    </div>

    <!-- API Endpoints -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">üîó API Endpoints</h3>
      <div class="bg-slate-100 p-4 rounded-lg">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
          <div>
            <h4 class="font-semibold text-emerald-600 mb-2">üöÄ Core Endpoints</h4>
            <ul class="space-y-1 text-slate-700">
              <li><code class="bg-blue-100 px-2 py-1 rounded">POST /agentic_search</code> - –£–º–Ω—ã–π –ø–æ–∏—Å–∫</li>
              <li><code class="bg-orange-100 px-2 py-1 rounded">POST /search</code> - –ü–æ–∏—Å–∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤</li>
              <li><code class="bg-purple-100 px-2 py-1 rounded">POST /search_entities</code> - –ü–æ–∏—Å–∫ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º</li>
            </ul>
          </div>
          <div>
            <h4 class="font-semibold text-blue-600 mb-2">üìä Data Management</h4>
            <ul class="space-y-1 text-slate-700">
              <li><code class="bg-green-100 px-2 py-1 rounded">POST /ingest</code> - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤</li>
              <li><code class="bg-yellow-100 px-2 py-1 rounded">POST /langextract</code> - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π</li>
              <li><code class="bg-red-100 px-2 py-1 rounded">GET /entities</code> - –°–ø–∏—Å–æ–∫ —Å—É—â–Ω–æ—Å—Ç–µ–π</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Enterprise Architecture -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">üè¢ Enterprise RAG Architecture</h3>
      <div class="mermaid">
        graph TB
          subgraph "üè¢ Enterprise Data Sources"
            PG[("üêò PostgreSQL<br/>BigData<br/>Millions of rows")]
            CONF["üìö Confluence<br/>Knowledge Base"]
            WIKI["üìñ Wiki Systems<br/>Documentation"]
            FILES["üìÅ File Systems<br/>Documents"]
          end
          
          subgraph "üîÑ Data Connectors Layer"
            PG_CONN["üîå PostgreSQL<br/>Connector"]
            CONF_CONN["üîå Confluence<br/>API Connector"]
            WIKI_CONN["üîå Wiki<br/>API Connector"]
            FILE_CONN["üîå File System<br/>Connector"]
          end
          
          subgraph "üß† MultiAgent-RAG Core"
            ETL["‚öôÔ∏è ETL Pipeline<br/>Extract & Transform"]
            LANGX["üè∑Ô∏è LangExtract<br/>Entity Extraction"]
            VECTOR["üßÆ Vector Store<br/>FAISS + BM25"]
            AGENTS["ü§ñ Agentic RAG<br/>Query Processing"]
          end
          
          subgraph "üéØ Enterprise Features"
            SEARCH["üîç Unified Search<br/>Across all sources"]
            ANALYTICS["üìä Business Intelligence<br/>Entity Analytics"]
            INSIGHTS["üí° Data Insights<br/>AI-driven analysis"]
            ALERTS["üîî Smart Alerts<br/>Anomaly detection"]
          end
          
          subgraph "üë• User Interfaces"
            WEB["üåê Web Dashboard<br/>Current UI"]
            API["üîó REST API<br/>Integration"]
            SLACK["üí¨ Slack Bot<br/>Chat interface"]
            TEAMS["üëî MS Teams<br/>Enterprise chat"]
          end
          
          PG --> PG_CONN
          CONF --> CONF_CONN
          WIKI --> WIKI_CONN
          FILES --> FILE_CONN
          
          PG_CONN --> ETL
          CONF_CONN --> ETL
          WIKI_CONN --> ETL
          FILE_CONN --> ETL
          
          ETL --> LANGX
          LANGX --> VECTOR
          VECTOR --> AGENTS
          
          AGENTS --> SEARCH
          AGENTS --> ANALYTICS
          AGENTS --> INSIGHTS
          AGENTS --> ALERTS
          
          SEARCH --> WEB
          ANALYTICS --> API
          INSIGHTS --> SLACK
          ALERTS --> TEAMS
          
          style PG fill:#e1f5fe
          style CONF fill:#f3e5f5
          style AGENTS fill:#fff3e0
          style SEARCH fill:#e8f5e8
      </div>
    </div>

    <!-- Enterprise Use Cases -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">üíº Enterprise Use Cases</h3>
      <div class="mermaid">
        mindmap
          root)üè¢ Enterprise RAG(
            (üìä PostgreSQL BigData)
              –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
                –ê–Ω–æ–º–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
                –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
                –†–∏—Å–∫-–∞–Ω–∞–ª–∏–∑
              –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
                –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
                –ö—Ä–æ—Å—Å-–ø—Ä–æ–¥–∞–∂–∏
                Retention –∞–Ω–∞–ª–∏–∑
              –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
                KPI –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
                Process mining
                –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
            (üìö Confluence/Wiki)
              –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
                Troubleshooting
                Knowledge base
                Expert finding
              Onboarding
                Learning paths
                Documentation
                Best practices
              Compliance
                Policy tracking
                Audit trails
                Risk management
            (ü§ñ AI-Driven Insights)
              Predictive Analytics
                Trend forecasting
                Anomaly detection
                Capacity planning
              Automated Reporting
                Executive dashboards
                Alert systems
                Performance metrics
              Decision Support
                Recommendation engine
                What-if analysis
                Strategic planning
      </div>
    </div>

    <!-- Performance & Optimization -->
    <div class="diagram-container">
      <h3 class="text-xl font-semibold mb-4 text-center">‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
      <div class="mermaid">
        graph LR
          subgraph "üîß Backend Optimizations"
            TIMEOUT["`‚è±Ô∏è **Reduced Timeouts**
            30s API calls`"]
            BATCH["`üì¶ **Batch Processing**
            LLM reranking in batches`"]
            LIMIT["`üéØ **Result Limiting**
            Max 10 candidates`"]
          end
          
          subgraph "üöÄ Frontend Optimizations"
            STREAM["`üì° **Streaming**
            Real-time response display`"]
            CACHE["`üíæ **Client Caching**
            Entity suggestions cache`"]
            LAZY["`‚ö° **Lazy Loading**
            Progressive content loading`"]
          end
          
          subgraph "üóÉÔ∏è Data Optimizations"
            HYBRID["`üîÄ **Hybrid Search**
            BM25 + Vector combined`"]
            RRF["`üéØ **RRF Ranking**
            Reciprocal Rank Fusion`"]
            SMART_CHUNK["`‚úÇÔ∏è **Smart Chunking**
            Optimized text segmentation`"]
          end
          
          TIMEOUT --> STREAM
          BATCH --> CACHE
          LIMIT --> LAZY
          HYBRID --> RRF
          RRF --> SMART_CHUNK
          
          style TIMEOUT fill:#ffebee
          style STREAM fill:#e8f5e8
          style HYBRID fill:#e3f2fd
      </div>
    </div>

    <footer class="text-center mt-8 text-slate-500 text-sm">
      <p>üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã MultiAgent-RAG Pro v4.7.1</p>
      <p>üìÖ –°–æ–∑–¥–∞–Ω–æ: 2024-12-20 | üîÑ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: v4.7.1 - ENTERPRISE + LANGEXTRACT FIX</p>
      <p>üè¢ –í–∫–ª—é—á–∞–µ—Ç Enterprise –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PostgreSQL BigData –∏ Confluence/Wiki –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</p>
    </footer>

  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Mermaid
    mermaid.initialize({ 
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#10b981',
        primaryTextColor: '#1f2937',
        primaryBorderColor: '#059669',
        lineColor: '#6b7280',
        secondaryColor: '#f3f4f6',
        tertiaryColor: '#e5e7eb',
        background: '#ffffff',
        mainBkg: '#ffffff',
        secondBkg: '#f9fafb',
        tertiaryBkg: '#f3f4f6'
      },
      flowchart: {
        curve: 'basis',
        padding: 20
      },
      sequence: {
        actorMargin: 50,
        width: 150,
        height: 65,
        boxMargin: 10,
        boxTextMargin: 5,
        noteMargin: 10,
        messageMargin: 35
      }
    });

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º
    document.addEventListener('DOMContentLoaded', function() {
      const diagrams = document.querySelectorAll('.mermaid');
      diagrams.forEach((diagram, index) => {
        const container = diagram.parentElement;
        const downloadBtn = document.createElement('button');
        downloadBtn.className = 'mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors';
        downloadBtn.textContent = 'üì• –°–∫–∞—á–∞—Ç—å –∫–∞–∫ PNG';
        downloadBtn.onclick = () => downloadDiagram(diagram, `diagram-${index + 1}`);
        container.appendChild(downloadBtn);
      });
    });

    function downloadDiagram(diagramElement, filename) {
      const svg = diagramElement.querySelector('svg');
      if (!svg) return;

      // –°–æ–∑–¥–∞–µ–º canvas –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ SVG –≤ PNG
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const svgData = new XMLSerializer().serializeToString(svg);
      const svgBlob = new Blob([svgData], {type: 'image/svg+xml;charset=utf-8'});
      const svgUrl = URL.createObjectURL(svgBlob);
      
      const img = new Image();
      img.onload = function() {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.fillStyle = 'white';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);
        
        // –°–∫–∞—á–∏–≤–∞–µ–º PNG
        canvas.toBlob(function(blob) {
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `${filename}.png`;
          a.click();
          URL.revokeObjectURL(url);
        });
        
        URL.revokeObjectURL(svgUrl);
      };
      img.src = svgUrl;
    }
  </script>
</body>
</html>
